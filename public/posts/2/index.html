<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>HugoでJS/CSSファイルをMinify, Bundleする - frazzled-technology</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Hugo で最低限のブログ機能を作ったので、最適化をしたくなりました。と言っても SSG な上、このサイトはシンプルすぎるのであまりやることがなかった。本当は Lighthouse All100 やります！！！みたいな記事にしたかったんだけどなぁ。"><meta property="og:image" content><meta property="og:title" content="HugoでJS/CSSファイルをMinify, Bundleする"><meta property="og:description" content="Hugo で最低限のブログ機能を作ったので、最適化をしたくなりました。と言っても SSG な上、このサイトはシンプルすぎるのであまりやることがなかった。本当は Lighthouse All100 やります！！！みたいな記事にしたかったんだけどなぁ。"><meta property="og:type" content="article"><meta property="og:url" content="https://Medilore.github.io/frazzled-technology/posts/2/"><meta property="og:image" content="https://Medilore.github.io/frazzled-technology/OGP.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-14T02:33:56+09:00"><meta property="article:modified_time" content="2022-05-14T02:33:56+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://Medilore.github.io/frazzled-technology/OGP.png"><meta name=twitter:title content="HugoでJS/CSSファイルをMinify, Bundleする"><meta name=twitter:description content="Hugo で最低限のブログ機能を作ったので、最適化をしたくなりました。と言っても SSG な上、このサイトはシンプルすぎるのであまりやることがなかった。本当は Lighthouse All100 やります！！！みたいな記事にしたかったんだけどなぁ。"><link href=https://Medilore.github.io/frazzled-technology/css/fonts.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://Medilore.github.io/frazzled-technology/css/main.min.db18ac181111daeb15b08fcebaa977354e04862f1c87d69e40f3eb8c8ed8376b.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://Medilore.github.io/frazzled-technology/css/dark.min.d75a975883931cf22887a7c923a849bbb9869c17c05fe858d49dd0be66075a42.css><script src=https://Medilore.github.io/frazzled-technology/js/prism.min.a310cc59a9b4d404bc400bfa515f47f31f3e95f5cb381462196d94dadc236848.js></script>
<link rel=stylesheet href=https://Medilore.github.io/frazzled-technology/bundle.min.25bb75e684eb635738b207ecab6a9f47e5f78507d7c8c706d4a96cb19625db23.css></head><body><div class=content><header><div class=main><a href=https://Medilore.github.io/frazzled-technology/>frazzled-technology</a></div><nav></nav></header><main><article><div class=title><h1 class=title>HugoでJS/CSSファイルをMinify, Bundleする</h1><div class=meta>Posted on 2022-05-14</div></div><section class=body><p>Hugo で最低限のブログ機能を作ったので、最適化をしたくなりました。</p><p>と言っても SSG な上、このサイトはシンプルすぎるのであまりやることがなかった。<del>本当は Lighthouse All100 やります！！！みたいな記事にしたかったんだけどなぁ。</del></p><h2 id=ライブラリ達を-minify-する>ライブラリ達を minify する</h2><p>build 時になんかやってー pipe でつなげてーとかめんどくさいので Hugo にある minify 機能を使う</p><pre><code class=language-html>{{ $prismjs := resources.Get &quot;js/prism.js&quot; | minify | fingerprint }}
&lt;script src=&quot;{{ $prismjs.Permalink }}&quot;&gt;&lt;/script&gt;
</code></pre><p>こんだけで minify してくれる。fingerprint はファイルキャッシュをいい感じにやってくれるやつ。いらなかったら消してね</p><h2 id=bundle-する>bundle する</h2><p>なんと Hugo は bundle もできるのだ(すごい)</p><p>まず resource を定義して</p><pre><code class=language-markup>{{ $prismOkaidiacss:= resources.Get &quot;css/prism-okaidia.css&quot; | minify | fingerprint }}
{{ $prismcss:= resources.Get &quot;css/prism.css&quot; | minify | fingerprint }}
{{ $modalcss := resources.Get &quot;css/s-img-modal.css&quot; | minify | fingerprint }}

{{ $prismjs := resources.Get &quot;js/prism.js&quot; | minify | fingerprint }}
{{ $modaljs := resources.Get &quot;js/s-img-modal.js&quot; | minify | fingerprint }}
</code></pre><p>resources.Concat で bundle 後、普通に読み込む</p><pre><code class=language-markup>{{ $bundlecss := slice $prismOkaidiacss $prismcss $modalcss | resources.Concat &quot;bundle.css&quot; | minify | fingerprint }}
&lt;link rel=&quot;stylesheet&quot; href=&quot;{{ $bundlecss.Permalink }}&quot;&gt;

{{ $bundlejs := slice $prismjs $modaljs | resources.Concat &quot;bundle.js&quot; | minify | fingerprint }}
&lt;script src=&quot;{{ $bundlejs.Permalink }}&quot;&gt;&lt;/script&gt;
</code></pre><p>これを<code>/layouts/headers.html</code>に書けばおっけー</p><p>使ってるライブラリが多いサイトだと効果大だが、このサイトは prismjs ぐらいしか使ってないので微妙でした。Lighthouse からのお叱りが減った程度。</p><p>EOF</p></section><div class=post-tags></div></article></main><script src=https://Medilore.github.io/frazzled-technology/js/s-img-modal.min.b99bb811c19a9c48d595e764a3b34a8eeeb4af8ebe37c58b1962700798709bfd.js></script><footer><div class=footer-info>© 2022-2022 frazzled-technology</div></footer></div></body></html>